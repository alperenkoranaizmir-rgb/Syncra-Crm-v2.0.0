{% extends 'base.html' %}
{% load static %}

{% block title %}ChartJS Demo{% endblock %}

{% block content %}
<div class="row gap-fix">
  <div class="col-md-6">
    <div class="card">
      <div class="card-header">
        <h3 class="card-title">Area Chart</h3>
        <div class="card-tools">
          <button type="button" class="btn btn-tool" data-card-widget="collapse"><i class="fas fa-minus"></i></button>
        </div>
      </div>
      <div class="card-body">
        <canvas id="areaChart" style="height:250px"></canvas>
      </div>
    </div>
  </div>
  <div class="col-md-6">
    <div class="card">
      <div class="card-header">
        <h3 class="card-title">Donut Chart</h3>
        <div class="card-tools">
          <button type="button" class="btn btn-tool" data-card-widget="collapse"><i class="fas fa-minus"></i></button>
        </div>
      </div>
      <div class="card-body">
        <canvas id="donutChart" style="height:250px"></canvas>
      </div>
    </div>
  </div>
</div>
{% endblock %}

{% block extra_js %}
  {{ block.super }}
  <!-- ChartJS -->
  <script>
    // Area Chart
    (function(){
      var ctx = document.getElementById('areaChart').getContext('2d')
      // create gradient fill similar to AdminLTE demo
      var gradient = ctx.createLinearGradient(0,0,0,250)
      gradient.addColorStop(0, 'rgba(60,141,188,0.6)')
      gradient.addColorStop(1, 'rgba(60,141,188,0.1)')

      var areaChart = new Chart(ctx, {
        type: 'line',
        data: {
          labels: ['Ocak','Şub','Mar','Nis','May','Haz','Tem','Ağu','Eyl','Eki','Kas','Ara'],
          datasets: [{
            label: 'Aylık Ziyaret',
            data: [30,45,28,80,40,60,70,55,50,65,75,90],
            backgroundColor: gradient,
            borderColor: 'rgba(60,141,188,1)',
            borderWidth: 2,
            pointRadius: 3,
            fill: true
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: { legend: { display: false } },
          scales: {
            x: { grid: { display: false } },
            y: { beginAtZero: true }
          },
          elements: { line: { tension: 0.3 } }
        }
      })
    })();

    // Donut Chart
    (function(){
      var ctx = document.getElementById('donutChart').getContext('2d')
      var donutChart = new Chart(ctx, {
        type: 'doughnut',
        data: {
          labels: ['Tamamlandı','Devam Ediyor','Beklemede'],
          datasets: [{ data: [55,30,15], backgroundColor: ['#28a745','#ffc107','#dc3545'] }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: { legend: { position: 'bottom' } }
        }
      })
    })();
  </script>
{% endblock %}

{% block extra_css %}
  {{ block.super }}
  <link rel="stylesheet" href="{% static 'css/charts_overrides.css' %}">
{% endblock %}
